		ORG 0
		MOV SP, #1<16
		MOV R0, #1<8
		MOV R9, #4<8
		
GLAVNI	LDR R1, [R0], #4	;UCITAJ BROJ
		MOV R2, #1			;USPOREDI GA SA
		MOV R2, R2, LSL #31
		CMP R1, R2			;80000000
		BEQ KRAJ
		
		CMP R1, #0
		STREQ R1, [R9], #4	;PROVJERA JE LI 0
		BEQ GLAVNI

		BMI PRETVR			;PROVJERA JE LI NEGATIVNO
		
DALJE	STMFD R13!, {R1}
		BL KUB
		ADD R13, R13, #4	;R2 VRACA REZULTAT
		
		SUBPL R2, R2, #1	;DJELJENIK
		ADDMI R2, R2, #1
		MOV R3, #2
		MUL R3, R1, R3		;DJELITELJ
		
		STMFD R13!, {R2, R3}
		BL DIV
		ADD R13, R13, #8	;R4 VRACA REZULTAT
		
		STR R7, [R9]		;SPREMANJE REZULTATA
		ADD R9, R9, #4
		B GLAVNI

KUB		STMFD R13!, {R10}	;KONTEKST
		ADD R10, R13, #4
		LDMFD R10, {R10}  	
		MUL R2, R10, R10	;R2^2
		MUL R2, R2, R10		;R2^3
		LDMFD R13!, {R10}
		MOV PC, LR
		
DIV 	STMFD R13!, {R4, R5, R6}	
		ADD R4, R13, #%D16
		LDMFD R4, {R4}		;DJELITELJ
		ADD R5, R13, #%D12
		LDMFD R5, {R5}		;DJELJENIK
		
		MOV R7, #0
	
PETLJA	SUBS R5, R5, R4
		ADD R7, R7, #1
		BPL PETLJA
		SUBMI R7, R7, #1
		LDMFD R13!, {R4, R5, R6}
		MOV PC, LR
		
PRETVR	SUB R1, R1, #1
		LDR R6, BROJ		;PRETVARANJE BROJA U POZITIVNI
		EOR R1, R1, R6
		AND R1, R1, R6
		B DALJE
		
KRAJ	SWI 123456

		ORG 100
		DW 0,3,6,FFFFFFFF,FFFFFFFA,80000000

BROJ	DW 7FFFFFFF

